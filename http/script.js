class K{static CmElementBefore(H,O){return(H.compareDocumentPosition(O)&Node.DOCUMENT_POSITION_FOLLOWING)!==0}static CmElementAfter(H,O){return(H.compareDocumentPosition(O)&Node.DOCUMENT_POSITION_PRECEDING)!==0}static CmBankersRound(H,O=0){var j=H*Math.pow(10,O),w=Math.round(j),M=Math.abs(j)%1===0.5?w%2===0?w:w-1:w;return M/Math.pow(10,O)}static CmGetRandomIntInclusive(H,O){let j=Math.ceil(H),w=Math.floor(O);return Math.floor(Math.random()*(w-j+1)+j)}}class N{static CvRangeLengthMax=4;IvElementTransitions=null;IvElementTransitionsChildren=null;IvElementTransitionsSelect=null;IvElementTransitionsDeleteSelected=null;IvElementTransitionsDeleteAll=null;IvElementTransitionsDeleteAllConfirm=null;IvElementTransitionsConcatenated=null;IvElementTransitionsGenerateDuplicates=null;IvElementTransitionsConcatenatedCopy=null;IvElementTransitionsConcatenatedPaste=null;IvElementTransitionsOutcomesCopy=null;IvElementTransitionsCopyAll=null;IvElementTransitionsImport=null;IvElementTransitionsGenerate=null;IvElementTransitionsGenerateClear=null;IvElementTransitionsOutcomes=null;IvTransitionsImportRegex=/(?: *([^,\r\n][^,\r\n]*?)) *(?:\d\d*? *- *\d+)?(?: *\( *(\d\d*?) *\)|\d+)[^,]*(?=,|$)| *([^,\r\n][^,]*?) ?(?=,|$)/g;IvDragObject=null;IvTransitionOutcomes=new Set;IvProgramDependencyInjected=!1;get IpSelect(){return this.IvElementTransitionsSelect.checked}get IpTransitions(){return this.IvElementTransitionsChildren}constructor(){}ImProgramDependencyInject(){this.IvProgramDependencyInjected=!0}ImProgramExecute(){if(this.IvElementTransitionsImport=document.getElementById("ITransitionsImport"),this.IvElementTransitionsImport.addEventListener("click",this.ImOnClick_TransitionsImport.bind(this)),this.IvElementTransitions=document.getElementById("ITransitions"),this.IvElementTransitionsChildren=this.IvElementTransitions.children,this.IvElementTransitionsSelect=document.getElementById("ITransitionsSelect"),this.IvElementTransitionsSelect.addEventListener("click",this.ImOnCheckbox_TransitionsSelect.bind(this)),this.IvElementTransitionsDeleteSelected=document.getElementById("ITransitionsDeleteSelected"),this.IvElementTransitionsDeleteSelected.addEventListener("click",this.ImOnClick_TransitionsDeleteSelected.bind(this)),this.IvElementTransitionsDeleteAllConfirm=document.getElementById("ITransitionsDeleteAllConfirm"),this.IvElementTransitionsDeleteAllConfirm.addEventListener("click",this.ImOnCheckbox_TransitionsDeleteAllConfirm.bind(this)),this.IvElementTransitionsDeleteAll=document.getElementById("ITransitionsDeleteAll"),this.IvElementTransitionsDeleteAll.addEventListener("click",this.ImOnClick_TransitionsDeleteAll.bind(this)),this.IvElementTransitionsConcatenated=document.getElementById("ITransitionsConcatenated"),this.IvElementTransitionsConcatenated.addEventListener("input",this.ImOnInput_TransitionsConcatenated.bind(this)),this.IvElementTransitionsConcatenatedCopy=document.getElementById("ITransitionsConcatenatedCopy"),this.IvElementTransitionsConcatenatedCopy.addEventListener("click",this.ImOnClick_TransitionsConcatenatedCopy.bind(this)),this.IvElementTransitionsConcatenatedPaste=document.getElementById("ITransitionsConcatenatedPaste"),this.IvElementTransitionsConcatenatedPaste.addEventListener("click",this.ImOnClick_TransitionsConcatenatedPaste.bind(this)),this.IvElementTransitionsOutcomesCopy=document.getElementById("ITransitionsOutcomesCopy"),this.IvElementTransitionsOutcomesCopy.addEventListener("click",this.ImOnClick_TransitionsOutcomesCopy.bind(this)),this.IvElementTransitionsCopyAll=document.getElementById("ITransitionsCopyAll"),this.IvElementTransitionsCopyAll.addEventListener("click",this.ImOnClick_TransitionsCopyAll.bind(this)),this.IvElementTransitionsGenerate=document.getElementById("ITransitionsGenerate"),this.IvElementTransitionsGenerate.addEventListener("click",this.ImOnClick_TransitionsGenerate.bind(this)),this.IvElementTransitionsGenerateClear=document.getElementById("ITransitionsGenerateClear"),this.IvElementTransitionsGenerateClear.addEventListener("click",this.ImOnClick_TransitionsGenerateClear.bind(this)),this.IvElementTransitionsOutcomes=document.getElementById("ITransitionsOutcomes"),this.IvElementTransitionsGenerateDuplicates=document.getElementById("ITransitionsGenerateDuplicates"),this.ImSetStateTransitionsDeleteSelected(!1),this.ImSetStateTransitionsDeleteAll(this.IvElementTransitionsDeleteAllConfirm.checked),this.ImSetStateTransitionsImport(!1),this.ImSetStateTransitionsConcatenatedCopy(!1),this.ImSetStateTransitionsOutcomesCopy(!1),this.ImSetStateTransitionsCopyAll(!1),!this.IpTransitions.length)this.ImInsertTransition(null,!0)}ImInsertTransition(H,O,j=null,w=null){let M=document.createElement("li"),W=document.createElement("input");W.type="checkbox",W.disabled=!this.IpSelect,W.classList.add("CTransitionCheckbox"),W.addEventListener("click",this.ImOnCheckbox_TransitionSelect.bind(this));let z=document.createElement("span");z.classList.add("CCheckbox"),z.appendChild(W),M.appendChild(z);let q=document.createElement("span");q.draggable=!0,q.classList.add("CTransitionDraggable"),q.addEventListener("dblclick",this.ImOnDoubleClick_TransitionDraggable.bind(this)),q.addEventListener("dragstart",this.ImOnDragStart_TransitionDraggable.bind(this)),q.addEventListener("dragover",this.ImOnDragOver_TransitionDraggable.bind(this)),q.addEventListener("drop",this.ImOnDrop_TransitionDraggable.bind(this)),M.appendChild(q);let U=document.createElement("input");if(U.type="number",U.required=!0,U.classList.add("CTransitionRange"),U.addEventListener("input",this.ImOnInput_TransitionRange.bind(this)),U.addEventListener("keyup",this.ImOnKeyUp_TransitionRange.bind(this)),w)if(j)U.valueAsNumber=j;else U.valueAsNumber=1;else if(j)U.valueAsNumber=j;M.appendChild(U);let F=document.createElement("input");if(F.type="text",F.required=!0,F.classList.add("CTransitionText"),F.addEventListener("input",this.ImOnInput_TransitionText.bind(this)),F.addEventListener("keyup",this.ImOnKeyUp_TransitionText.bind(this)),w)F.value=w;M.appendChild(F);let J=document.createElement("progress");if(J.setAttribute("min","0"),J.setAttribute("max","1"),J.value=0,J.classList.add("CTransitionPercent"),M.appendChild(J),this.ImTransitionsDisplayHide(),this.ImUpdate(),this.ImTransitionsDisplayShow(),H)H.after(M);else this.IvElementTransitions.appendChild(M);if(O)U.focus()}ImTransitionsDisplayHide(){this.IvElementTransitions.style.display="none"}ImTransitionsDisplayShow(){this.IvElementTransitions.style.display=""}ImSetStateTransitionsDeleteSelected(H){this.IvElementTransitionsDeleteSelected.disabled=!H}ImSetStateTransitionsConcatenatedCopy(H){this.IvElementTransitionsConcatenatedCopy.disabled=!H}ImSetStateTransitionsOutcomesCopy(H){this.IvElementTransitionsOutcomesCopy.disabled=!H}ImSetStateTransitionsCopyAll(H){this.IvElementTransitionsCopyAll.disabled=!H}ImSetStateTransitionsDeleteAll(H){this.IvElementTransitionsDeleteAll.disabled=!H}ImSetStateTransitionCheckbox(H){if(H){let O;for(O of this.IpTransitions)O.children[0].children[0].disabled=!1}else{let O;for(O of this.IpTransitions)O.children[0].children[0].disabled=!0}}ImSetStateTransitionsImport(H){this.IvElementTransitionsImport.disabled=!H}ImUpdate(){let H=[],O=0,j,w,M,W=1,z=0,q=!1,U=!1;for(M of this.IpTransitions){if(j=M.children[2],w=M.children[3],!q){if(j.validity.valid)z+=j.valueAsNumber;else q=!0;if(!U)if(w.validity.valid)if(z-W===0)H.push(w.value+" "+W);else H.push(w.value+" "+W+"-"+z+" ("+(z-W+1)+")");else U=!0;W=z+1}if(O<w.value.length)O=w.value.length}if(z<=0)q=!0;for(M of this.IpTransitions){if(q)M.children[4].value=0;else M.children[4].value=M.children[2].valueAsNumber/z;M.children[3].style.width=O+"ch"}if(this.ImSetStateTransitionsImport(!1),this.IvElementTransitionsDeleteAllConfirm.checked=!1,this.ImSetStateTransitionsDeleteAll(!1),q||U)this.IvElementTransitionsConcatenated.value="";else this.IvElementTransitionsConcatenated.value=H.join(", ");this.ImClearOutcomes(),this.ImSetStateTransitionsConcatenatedCopy(this.IvElementTransitionsConcatenated.value.length!==0),this.ImSetStateTransitionsOutcomesCopy(!1),this.ImSetStateTransitionsCopyAll(!1)}ImClearOutcomes(){if(this.IvElementTransitionsOutcomes.value="",this.ImSetStateTransitionsOutcomesCopy(!1),this.ImSetStateTransitionsCopyAll(!1),this.IvTransitionOutcomes.size)this.IvTransitionOutcomes.clear()}ImOnDoubleClick_TransitionDraggable(H){this.ImTransitionsDisplayHide(),this.ImInsertTransition(H.target.parentElement,!0),this.ImUpdate(),this.ImTransitionsDisplayShow()}ImOnCheckbox_TransitionsSelect(H){this.ImTransitionsDisplayHide(),this.ImSetStateTransitionCheckbox(H.target.checked),this.ImTransitionsDisplayShow()}ImOnCheckbox_TransitionsDeleteAllConfirm(H){this.ImSetStateTransitionsDeleteAll(H.target.checked)}ImOnCheckbox_TransitionSelect(H){if(!this.IpSelect)return;let O;for(O of this.IpTransitions)if(O.children[0].children[0].checked){this.ImSetStateTransitionsDeleteSelected(!0);return}this.ImSetStateTransitionsDeleteSelected(!1)}ImOnClick_TransitionsDeleteSelected(H){if(!this.IpSelect)return;let O=[],j;for(j of this.IpTransitions)if(j.children[0].children[0].checked)O.push(j);this.ImTransitionsDisplayHide();for(j of O)j.remove();if(!this.IpTransitions.length)this.ImInsertTransition(null,!0);this.ImUpdate(),this.ImSetStateTransitionsDeleteSelected(!1),this.ImTransitionsDisplayShow()}ImOnClick_TransitionsDeleteAll(H){if(this.ImSetStateTransitionsImport(!1),this.ImTransitionsDisplayHide(),this.IvElementTransitions.replaceChildren(),!this.IpTransitions.length)this.ImInsertTransition(null,!0);this.ImUpdate(),this.ImSetStateTransitionsDeleteSelected(!1),this.ImTransitionsDisplayShow()}ImOnDragStart_TransitionDraggable(H){this.IvDragObject=H.target}ImOnDragOver_TransitionDraggable(H){if(!this.IvDragObject)return;if(this.IvDragObject!==H.target)H.preventDefault()}ImOnDrop_TransitionDraggable(H){if(!this.IvDragObject)return;if(this.IvDragObject!==H.target)H.preventDefault();let O=this.IvDragObject.parentElement,j=H.target.parentElement;if(this.ImTransitionsDisplayHide(),K.CmElementBefore(O,j))j.after(O);else j.before(O);this.ImUpdate(),this.ImTransitionsDisplayShow()}ImOnInput_TransitionRange(H){let O=H.target;if(O.validity.valid&&O.value.length<0)O.value=O.value.substring(0,N.CvRangeLengthMax);this.ImTransitionsDisplayHide(),this.ImUpdate(),this.ImTransitionsDisplayShow()}ImOnKeyUp_TransitionRange(H){if(H.key==="Enter")H.preventDefault(),this.ImTransitionsDisplayHide(),this.ImInsertTransition(H.target.parentElement,!0),this.ImUpdate(),this.ImTransitionsDisplayShow()}ImOnKeyUp_TransitionText(H){if(H.key==="Enter")H.preventDefault(),this.ImTransitionsDisplayHide(),this.ImInsertTransition(H.target.parentElement,!0),this.ImUpdate(),this.ImTransitionsDisplayShow()}ImOnInput_TransitionText(H){this.ImTransitionsDisplayHide(),this.ImUpdate(),this.ImTransitionsDisplayShow()}ImOnClick_TransitionsImport(H){this.ImSetStateTransitionsImport(!1),this.IvTransitionsImportRegex.lastIndex=0,this.ImTransitionsDisplayHide(),this.IvElementTransitions.replaceChildren();let O=this.IvElementTransitionsConcatenated.value,j=this.IvTransitionsImportRegex.exec(O),w=0;while(j!==null){if(j[2])this.ImInsertTransition(null,!1,parseInt(j[2]),j[1]);else if(j[3])this.ImInsertTransition(null,!1,1,j[3]);else this.ImInsertTransition(null,!1,1,j[1]);if(j=this.IvTransitionsImportRegex.exec(O),console.log(this.IvTransitionsImportRegex.lastIndex),w++,w>100)break}if(!this.IpTransitions.length)this.ImInsertTransition(null,!0);this.ImUpdate(),this.ImTransitionsDisplayShow()}ImOnInput_TransitionsConcatenated(H){let O=this.IvElementTransitionsConcatenated.value.length;this.ImSetStateTransitionsImport(O!==0),this.ImSetStateTransitionsConcatenatedCopy(O!==0)}ImOnClick_TransitionsGenerate(H){let O,j,w,M=0,W,z,q=!1,U=!1,F=0,J=0,X=this.IvElementTransitionsGenerateDuplicates.checked;for(w of this.IpTransitions)if(O=w.children[2],j=w.children[3],!q){if(O.validity.valid)M+=O.valueAsNumber,J++;else q=!0;if(!U){if(!j.validity.valid)U=!0}}if(q||U){this.ImClearOutcomes();return}if(J)while(!0){F=K.CmGetRandomIntInclusive(1,M),W=1,z=0;for(w of this.IpTransitions){if(O=w.children[2],z+=O.valueAsNumber,W<=F&&F<=z){if(!X)if(this.IvTransitionOutcomes.has(W))break;else this.IvTransitionOutcomes.add(W);if(this.IvElementTransitionsOutcomes.value?.length)this.IvElementTransitionsOutcomes.value+=", "+F.toString()+" "+w.children[3].value;else this.IvElementTransitionsOutcomes.value=F.toString()+" "+w.children[3].value;this.ImSetStateTransitionsOutcomesCopy(!0),this.ImSetStateTransitionsCopyAll(this.IvElementTransitionsConcatenated.value.length!==0);return}W=z+1}if(this.IvTransitionOutcomes.size>=J)return}this.ImClearOutcomes()}ImOnClick_TransitionsGenerateClear(H){this.ImClearOutcomes()}ImOnClick_TransitionsConcatenatedCopy(H){navigator.clipboard.writeText(this.IvElementTransitionsConcatenated.value)}ImOnClick_TransitionsConcatenatedPaste(H){navigator.clipboard.readText().then((O)=>{this.IvElementTransitionsConcatenated.value=O;let j=this.IvElementTransitionsConcatenated.value.length;this.ImSetStateTransitionsImport(j!==0),this.ImSetStateTransitionsConcatenatedCopy(j!==0)})}ImOnClick_TransitionsOutcomesCopy(H){navigator.clipboard.writeText(this.IvElementTransitionsOutcomes.value)}ImOnClick_TransitionsCopyAll(H){navigator.clipboard.writeText(this.IvElementTransitionsConcatenated.value+`
`+this.IvElementTransitionsOutcomes.value)}}class Q{_IvGcRngTransitionManager=new N;IvDependencies=[this._IvGcRngTransitionManager];IvProgramDependencyInjected=!1;constructor(){}ImProgramDependencyInject(){this._IvGcRngTransitionManager.ImProgramDependencyInject();let H;for(H of this.IvDependencies)if(!H.IvProgramDependencyInjected)throw new Error("Dependency not injected.");this.IvProgramDependencyInjected=!0}ImProgramExecute(){this.ImProgramDependencyInject(),this._IvGcRngTransitionManager.ImProgramExecute()}}var _=new Q;_.ImProgramExecute();console.log("Ready.");
